blueprint:
  name: 'üå¨Ô∏è Turkov AirFlow MIN: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –±–∞–∑–∞'
  author: Gfermoto
  homeassistant:
    min_version: '2023.12.0'
  description: 'üå°Ô∏è –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞ –ü–í–£ Turkov –¥–ª—è Home Assistant.

    –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏.

    –û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏ –Ω–∞—Ä—É–∂–Ω—ã–µ CO2/PM2.5/VOC/NO) –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –≤ –ª—é–±–æ–π
    –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏.

    –õ–æ–≥–∏–∫–∞: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ –Ω–∞—Ä—É–∂–Ω—ã—Ö; –Ω–∞—Ä—É–∂–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–π
    —Ñ–∞–∫—Ç–æ—Ä.

    –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å, –≤–æ–∑–≤—Ä–∞—Ç –∫ –±–∞–∑–æ–≤–æ–º—É —Ä–µ–∂–∏–º—É –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç unavailable.

    –ë–ª–æ–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
    üéõÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –¥–∞—Ç—á–∏–∫–∏ -> üë• –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ -> üéöÔ∏è –ü–æ—Ä–æ–≥–∏ -> ‚öôÔ∏è –†–µ–∂–∏–º—ã.

    '
  domain: automation
  input:
    turkov_climate:
      name: üéõÔ∏è –ü–í–£ Turkov (climate)
      description: –û—Å–Ω–æ–≤–Ω–∞—è climate-—Å—É—â–Ω–æ—Å—Ç—å –≤–∞—à–µ–π –ü–í–£ Turkov.
      selector:
        entity:
          domain:
          - climate
          multiple: false
          reorder: false
    temp_indoor:
      name: üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏
      description: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–∞—Ç—á–∏–∫. –ü–æ –Ω–µ–º—É –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–∂–∏–º–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - temperature
          multiple: false
          reorder: false
    humidity_indoor:
      name: üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏
      description: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–∞—Ç—á–∏–∫. –ü–æ –Ω–µ–º—É –≤–∫–ª—é—á–∞–µ—Ç—Å—è/–≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è —É—Å–∏–ª–µ–Ω–Ω–∞—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - humidity
          multiple: false
          reorder: false
    temp_outdoor:
      name: üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–Ω–∞—Ä—É–∂–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏—è cooling.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - temperature
          multiple: false
          reorder: false
    co2_sensor:
      name: ü´Å CO2 –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, CO2 –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—á—ë—Ç–µ —É—Å–∏–ª–µ–Ω–∏—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - carbon_dioxide
          multiple: false
          reorder: false
    pm25_sensor:
      name: üß™ PM2.5 –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, PM2.5 –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—á—ë—Ç–µ —É—Å–∏–ª–µ–Ω–∏—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - pm25
          multiple: false
          reorder: false
    voc_sensor:
      name: üß¨ VOC –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, VOC –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—á—ë—Ç–µ —É—Å–∏–ª–µ–Ω–∏—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏.
      selector:
        entity:
          domain:
          - sensor
          multiple: false
          reorder: false
    no_sensor:
      name: üöó NOx –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, NOx –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—á—ë—Ç–µ —É—Å–∏–ª–µ–Ω–∏—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏.
      selector:
        entity:
          domain:
          - sensor
          multiple: false
          reorder: false
    co2_outdoor_sensor:
      name: ü´Å CO2 —Å–Ω–∞—Ä—É–∂–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–ª–æ—Ö–æ–º –Ω–∞—Ä—É–∂–Ω–æ–º CO2.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - carbon_dioxide
          multiple: false
          reorder: false
    pm25_outdoor_sensor:
      name: üß™ PM2.5 —Å–Ω–∞—Ä—É–∂–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–ª–æ—Ö–æ–º –Ω–∞—Ä—É–∂–Ω–æ–º PM2.5.
      selector:
        entity:
          domain:
          - sensor
          device_class:
          - pm25
          multiple: false
          reorder: false
    voc_outdoor_sensor:
      name: üß¨ VOC —Å–Ω–∞—Ä—É–∂–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–ª–æ—Ö–æ–º –Ω–∞—Ä—É–∂–Ω–æ–º VOC.
      selector:
        entity:
          domain:
          - sensor
          multiple: false
          reorder: false
    no_outdoor_sensor:
      name: üöó NOx —Å–Ω–∞—Ä—É–∂–∏
      default: []
      description: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–ª–æ—Ö–æ–º –Ω–∞—Ä—É–∂–Ω–æ–º NOx.
      selector:
        entity:
          domain:
          - sensor
          multiple: false
          reorder: false
    presence_home:
      name: üë• –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      default: []
      description: –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å binary_sensor / person / group / alarm_control_panel.
      selector:
        entity:
          domain:
          - binary_sensor
          - person
          - group
          - alarm_control_panel
          multiple: false
          reorder: false
    presence_mode:
      name: üß≠ –õ–æ–≥–∏–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è
      description: –ö–∞–∫ —Å—á–∏—Ç–∞—Ç—å ¬´–Ω–µ—Ç –¥–æ–º–∞¬ª –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è.
      default: auto
      selector:
        select:
          options:
          - label: –ê–≤—Ç–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
            value: auto
          - label: Binary Sensor (off = –Ω–µ—Ç –¥–æ–º–∞)
            value: binary_sensor
          - label: Person/Group (not_home = –Ω–µ—Ç –¥–æ–º–∞)
            value: person_group
          - label: Alarm (disarmed = –¥–æ–º–∞, –∏–Ω–∞—á–µ –Ω–µ—Ç –¥–æ–º–∞)
            value: alarm
          - label: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Å–º. –ø–æ–ª–µ –Ω–∏–∂–µ)
            value: custom
    presence_away_state:
      name: üè∑Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–Ω–µ—Ç –¥–æ–º–∞"
      description: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ".
      default: not_home
      selector:
        text:
          multiline: false
          multiple: false
    away_behavior:
      name: üö™ –ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
      description: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –∫–æ–≥–¥–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç –¥–æ–º–∞.
      default: maintain
      selector:
        select:
          options:
          - label: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–µ–∂–∏–º –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ (temp_away)
            value: 'maintain'
          - label: –í—ã–∫–ª—é—á–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
            value: 'off'
    schedule_day_start:
      name: 'üåû –î–µ–Ω—å: –Ω–∞—á–∞–ª–æ'
      default: 07:00:00
      description: –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –¥–Ω–µ–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
      selector:
        time: {}
    schedule_night_start:
      name: 'üåô –ù–æ—á—å: –Ω–∞—á–∞–ª–æ'
      default: '23:00:00'
      description: –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
      selector:
        time: {}
    temp_day:
      name: üåû –£—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏—Ç–æ—á–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –¥–Ω–µ–º (¬∞C)
      default: 22
      description: –¶–µ–ª–µ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–∏—Ç–æ—á–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –≤ –¥–Ω–µ–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ. –ü–í–£ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç setpoint (–Ω–∞–≥—Ä–µ–≤ –∏–ª–∏ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –ø–æ–¥–∞–≤–∞–µ–º–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞).
      selector:
        number:
          min: 10.0
          max: 30.0
          step: 0.5
          mode: box
    temp_night:
      name: üåô –£—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏—Ç–æ—á–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –Ω–æ—á—å—é (¬∞C)
      default: 19
      description: –¶–µ–ª–µ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–∏—Ç–æ—á–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –≤ –Ω–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ.
      selector:
        number:
          min: 10.0
          max: 30.0
          step: 0.5
          mode: box
    temp_away:
      name: üö™ –£—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏—Ç–æ—á–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ (¬∞C)
      default: 17
      description: –¶–µ–ª–µ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–∏—Ç–æ—á–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –ø—Ä–∏ away=maintain. –ê–∫—Ç—É–∞–ª—å–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ away_behavior=maintain.
      selector:
        number:
          min: 10.0
          max: 30.0
          step: 0.5
          mode: box
    temp_hysteresis_on:
      name: 'üéöÔ∏è –ì–∏—Å—Ç–µ—Ä–µ–∑–∏—Å –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è (¬∞C)'
      default: 1.0
      description: –ù–∞ —Å–∫–æ–ª—å–∫–æ –≥—Ä–∞–¥—É—Å–æ–≤ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—Å–∏—Ç—å —Ü–µ–ª—å, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏–ª–æ—Å—å –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ.
      selector:
        number:
          min: 0.3
          max: 3.0
          step: 0.1
          mode: box
    outdoor_cool_min:
      name: 'üõ°Ô∏è –û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ: –º–∏–Ω. t —Å–Ω–∞—Ä—É–∂–∏ (¬∞C)'
      default: 18
      description: –ù–∏–∂–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è.
      selector:
        number:
          min: -20.0
          max: 35.0
          step: 1.0
          mode: box
    outdoor_vent_min:
      name: 'üõ°Ô∏è –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è: –º–∏–Ω. t —Å–Ω–∞—Ä—É–∂–∏ (–∞–Ω—Ç–∏–∑–∞–º–æ—Ä–æ–∑–∫–∞, ¬∞C)'
      default: 0
      description: –ï—Å–ª–∏ –Ω–∞ —É–ª–∏—Ü–µ –Ω–∏–∂–µ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞, —Ä–µ–∂–∏–º HVAC "–≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è/fan_only" –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏).
      selector:
        number:
          min: -35.0
          max: 20.0
          step: 1.0
          mode: box
    outdoor_temp_policy:
      name: 'üõ°Ô∏è –ï—Å–ª–∏ t —Å–Ω–∞—Ä—É–∂–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞'
      default: conservative
      description: 'conservative: –∑–∞–ø—Ä–µ—â–∞—Ç—å cooling/fan_only –±–µ–∑ –¥–∞—Ç—á–∏–∫–∞ —É–ª–∏—Ü—ã; permissive: —Ä–∞–∑—Ä–µ—à–∞—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.'
      selector:
        select:
          options:
          - label: conservative (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
            value: conservative
          - label: permissive (—Ä–∞–∑—Ä–µ—à–∞—Ç—å)
            value: permissive
    humidity_high:
      name: 'üéöÔ∏è –í–ª–∞–∂–Ω–æ—Å—Ç—å: –≤–∫–ª—é—á–∏—Ç—å —É—Å–∏–ª–µ–Ω–∏–µ (%)'
      default: 70
      description: –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —É—Å–∏–ª–µ–Ω–Ω–∞—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è.
      selector:
        number:
          min: 30.0
          max: 95.0
          step: 1.0
          mode: box
    humidity_low:
      name: 'üéöÔ∏è –í–ª–∞–∂–Ω–æ—Å—Ç—å: –≤—ã–∫–ª—é—á–∏—Ç—å —É—Å–∏–ª–µ–Ω–∏–µ (%)'
      default: 60
      description: –ü—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ –¥–æ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —É—Å–∏–ª–µ–Ω–Ω–∞—è –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è.
      selector:
        number:
          min: 20.0
          max: 90.0
          step: 1.0
          mode: box
    co2_high:
      name: 'üéöÔ∏è CO2: –ø–æ—Ä–æ–≥ —É—Å–∏–ª–µ–Ω–∏—è (ppm)'
      default: 1000
      description: –ü–æ—Ä–æ–≥ –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å–∏–ª–µ–Ω–Ω–æ–π –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –ø–æ CO2.
      selector:
        number:
          min: 400.0
          max: 2500.0
          step: 10.0
          mode: box
    co2_low:
      name: 'üéöÔ∏è CO2: –ø–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ (ppm)'
      default: 750
      description: –ü–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –±–∞–∑–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è CO2.
      selector:
        number:
          min: 350.0
          max: 2400.0
          step: 10.0
          mode: box
    co2_outdoor_block:
      name: 'üõ°Ô∏è CO2 —Å–Ω–∞—Ä—É–∂–∏: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É—Å–∏–ª–µ–Ω–∏—è (ppm)'
      default: 1200
      description: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è.
      selector:
        number:
          min: 400.0
          max: 5000.0
          step: 10.0
          mode: box
    pm25_high:
      name: 'üéöÔ∏è PM2.5: –ø–æ—Ä–æ–≥ —É—Å–∏–ª–µ–Ω–∏—è (¬µg/m¬≥)'
      default: 50
      description: –ü–æ—Ä–æ–≥ –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å–∏–ª–µ–Ω–Ω–æ–π –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –ø–æ PM2.5.
      selector:
        number:
          min: 5.0
          max: 300.0
          step: 1.0
          mode: box
    pm25_low:
      name: 'üéöÔ∏è PM2.5: –ø–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ (¬µg/m¬≥)'
      default: 25
      description: –ü–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –±–∞–∑–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è PM2.5.
      selector:
        number:
          min: 3.0
          max: 250.0
          step: 1.0
          mode: box
    pm25_outdoor_block:
      name: 'üõ°Ô∏è PM2.5 —Å–Ω–∞—Ä—É–∂–∏: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É—Å–∏–ª–µ–Ω–∏—è (¬µg/m¬≥)'
      default: 100
      description: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è.
      selector:
        number:
          min: 10.0
          max: 400.0
          step: 1.0
          mode: box
    voc_high:
      name: 'üéöÔ∏è VOC: –ø–æ—Ä–æ–≥ —É—Å–∏–ª–µ–Ω–∏—è (–µ–¥. –¥–∞—Ç—á–∏–∫–∞)'
      default: 400
      description: –ü–æ—Ä–æ–≥ –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å–∏–ª–µ–Ω–Ω–æ–π –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –ø–æ VOC.
      selector:
        number:
          min: 10.0
          max: 3000.0
          step: 1.0
          mode: box
    voc_low:
      name: 'üéöÔ∏è VOC: –ø–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–µ–¥. –¥–∞—Ç—á–∏–∫–∞)'
      default: 300
      description: –ü–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –±–∞–∑–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è VOC.
      selector:
        number:
          min: 5.0
          max: 2500.0
          step: 1.0
          mode: box
    voc_outdoor_block:
      name: 'üõ°Ô∏è VOC —Å–Ω–∞—Ä—É–∂–∏: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É—Å–∏–ª–µ–Ω–∏—è (–µ–¥. –¥–∞—Ç—á–∏–∫–∞)'
      default: 500
      description: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è.
      selector:
        number:
          min: 10.0
          max: 5000.0
          step: 1.0
          mode: box
    no_high:
      name: 'üéöÔ∏è NOx: –ø–æ—Ä–æ–≥ —É—Å–∏–ª–µ–Ω–∏—è'
      default: 20
      description: –ü–æ—Ä–æ–≥ –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å–∏–ª–µ–Ω–Ω–æ–π –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –ø–æ NOx.
      selector:
        number:
          min: 1.0
          max: 500.0
          step: 1.0
          mode: box
    no_low:
      name: 'üéöÔ∏è NOx: –ø–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞'
      default: 10
      description: –ü–æ—Ä–æ–≥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –±–∞–∑–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è NOx.
      selector:
        number:
          min: 1.0
          max: 500.0
          step: 1.0
          mode: box
    no_outdoor_block:
      name: 'üõ°Ô∏è NOx —Å–Ω–∞—Ä—É–∂–∏: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É—Å–∏–ª–µ–Ω–∏—è'
      default: 20
      description: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —Ä–∞–∑–≥–æ–Ω —É—Å–∏–ª–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è.
      selector:
        number:
          min: 1.0
          max: 500.0
          step: 1.0
          mode: box
    fan_mode_low:
      name: 'üåÄ –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä: –Ω–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å'
      default: low
      description: –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞ –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ low –¥–ª—è Zenit Heco).
      selector:
        select:
          options:
          - label: low
            value: low
          - label: medium
            value: medium
          - label: high
            value: high
          - label: auto
            value: auto
          - label: 'off'
            value: 'off'
    fan_mode_medium:
      name: 'üåÄ –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä: —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å'
      default: medium
      description: –°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ —É–º–µ—Ä–µ–Ω–Ω–æ–º —É—Ö—É–¥—à–µ–Ω–∏–∏ –≤–æ–∑–¥—É—Ö–∞ –∏–ª–∏ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ —É—Å–∏–ª–µ–Ω–∏—è –∏–∑-–∑–∞ –Ω–∞—Ä—É–∂–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ medium).
      selector:
        select:
          options:
          - label: low
            value: low
          - label: medium
            value: medium
          - label: high
            value: high
          - label: auto
            value: auto
          - label: 'off'
            value: 'off'
    fan_mode_high:
      name: 'üåÄ –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä: –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å'
      default: high
      description: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ–º —É—Ö—É–¥—à–µ–Ω–∏–∏ –≤–æ–∑–¥—É—Ö–∞/–≤–ª–∞–∂–Ω–æ—Å—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ high).
      selector:
        select:
          options:
          - label: low
            value: low
          - label: medium
            value: medium
          - label: high
            value: high
          - label: auto
            value: auto
          - label: 'off'
            value: 'off'
    hvac_mode_ventilation:
      name: 'üå¨Ô∏è HVAC: –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è'
      default: fan_only
      description: –†–µ–∂–∏–º –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ fan_only –¥–ª—è Zenit Heco).
      selector:
        select:
          options:
          - label: fan_only
            value: fan_only
          - label: heat
            value: heat
          - label: cool
            value: cool
          - label: 'off'
            value: 'off'
    hvac_mode_heat:
      name: 'üî• HVAC: –Ω–∞–≥—Ä–µ–≤'
      default: heat
      description: –†–µ–∂–∏–º –Ω–∞–≥—Ä–µ–≤–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ heat).
      selector:
        select:
          options:
          - label: heat
            value: heat
          - label: cool
            value: cool
          - label: fan_only
            value: fan_only
          - label: 'off'
            value: 'off'
    hvac_mode_cool:
      name: '‚ùÑÔ∏è HVAC: –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ'
      default: cool
      description: –†–µ–∂–∏–º –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ cool).
      selector:
        select:
          options:
          - label: cool
            value: cool
          - label: heat
            value: heat
          - label: fan_only
            value: fan_only
          - label: 'off'
            value: 'off'
  source_url: https://github.com/Gfermoto/hass-PVU/blob/main/pvu_min.yaml
trigger:
# –ü–µ—Ä–µ—Å—á—ë—Ç –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã + –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö/–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤.
- platform: time_pattern
  minutes: /2
- platform: state
  entity_id: !input temp_indoor
- platform: state
  entity_id: !input humidity_indoor
- platform: state
  entity_id: !input temp_outdoor
- platform: state
  entity_id: !input co2_sensor
- platform: state
  entity_id: !input pm25_sensor
- platform: state
  entity_id: !input voc_sensor
- platform: state
  entity_id: !input no_sensor
- platform: state
  entity_id: !input co2_outdoor_sensor
- platform: state
  entity_id: !input pm25_outdoor_sensor
- platform: state
  entity_id: !input voc_outdoor_sensor
- platform: state
  entity_id: !input no_outdoor_sensor
- platform: state
  entity_id: !input presence_home
action:
- variables:
    # –í—ã—Ç–∞—Å–∫–∏–≤–∞–µ–º –≤—Å–µ blueprint input –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    # (—á—Ç–æ–±—ã –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–º–µ–Ω–∞ –≤ —à–∞–±–ª–æ–Ω–∞—Ö).
    turkov_climate: !input turkov_climate
    temp_indoor: !input temp_indoor
    humidity_indoor: !input humidity_indoor
    temp_outdoor: !input temp_outdoor
    co2_sensor: !input co2_sensor
    pm25_sensor: !input pm25_sensor
    voc_sensor: !input voc_sensor
    no_sensor: !input no_sensor
    co2_outdoor_sensor: !input co2_outdoor_sensor
    pm25_outdoor_sensor: !input pm25_outdoor_sensor
    voc_outdoor_sensor: !input voc_outdoor_sensor
    no_outdoor_sensor: !input no_outdoor_sensor
    presence_home: !input presence_home
    schedule_day_start: !input schedule_day_start
    schedule_night_start: !input schedule_night_start
    temp_day: !input temp_day
    temp_night: !input temp_night
    temp_away: !input temp_away
    temp_hysteresis_on: !input temp_hysteresis_on
    outdoor_cool_min: !input outdoor_cool_min
    outdoor_vent_min: !input outdoor_vent_min
    outdoor_temp_policy: !input outdoor_temp_policy
    humidity_high: !input humidity_high
    humidity_low: !input humidity_low
    co2_high: !input co2_high
    co2_low: !input co2_low
    co2_outdoor_block: !input co2_outdoor_block
    pm25_high: !input pm25_high
    pm25_low: !input pm25_low
    pm25_outdoor_block: !input pm25_outdoor_block
    voc_high: !input voc_high
    voc_low: !input voc_low
    voc_outdoor_block: !input voc_outdoor_block
    no_high: !input no_high
    no_low: !input no_low
    no_outdoor_block: !input no_outdoor_block
    fan_mode_low: !input fan_mode_low
    fan_mode_medium: !input fan_mode_medium
    fan_mode_high: !input fan_mode_high
    hvac_mode_ventilation: !input hvac_mode_ventilation
    hvac_mode_heat: !input hvac_mode_heat
    hvac_mode_cool: !input hvac_mode_cool
    away_behavior: !input away_behavior
    presence_mode: !input presence_mode
    presence_away_state: !input presence_away_state
- variables:
    # === –í–†–ï–ú–Ø / –î–ï–ù–¨-–ù–û–ß–¨ ===
    now_hms: '{{ now().strftime(''%H:%M:%S'') }}'
    day_start: '{{ (schedule_day_start + '':00'')[:8] if (schedule_day_start | string
      | length) == 5 else (schedule_day_start | string)[:8] }}'
    night_start: '{{ (schedule_night_start + '':00'')[:8] if (schedule_night_start
      | string | length) == 5 else (schedule_night_start | string)[:8] }}'
    is_day: "{% set ds = day_start %} {% set ns = night_start %} {% set t = now_hms
      %} {% if ds <= ns %}\n  {{ ds <= t and t < ns }}\n{% else %}\n  {{ t >= ds or
      t < ns }}\n{% endif %}\n"
    is_day_bool: '{{ (is_day | string | trim | lower) == ''true'' }}'
    # === –ü–†–ò–°–£–¢–°–¢–í–ò–ï ===
    # presence_mode:
    # - binary_sensor: off = –Ω–µ—Ç –¥–æ–º–∞
    # - person_group: not_home = –Ω–µ—Ç –¥–æ–º–∞
    # - alarm: armed_away/armed_vacation/triggered = –Ω–µ—Ç –¥–æ–º–∞
    # - custom: —Å–æ—Å—Ç–æ—è–Ω–∏–µ presence_away_state = –Ω–µ—Ç –¥–æ–º–∞
    # - auto: –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–æ–≤—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º
    presence_entity: '{{ presence_home | default('''', true) | string }}'
    presence_domain: '{{ presence_entity.split(''.'')[0] if ''.'' in presence_entity
      else '''' }}'
    presence_state: '{{ states(presence_entity) if ''.'' in presence_entity else '''' }}'
    is_away: >
      {% if '.' not in presence_entity %}
        {{ false }}
      {% elif presence_mode == 'binary_sensor' %}
        {{ is_state(presence_entity, 'off') }}
      {% elif presence_mode == 'person_group' %}
        {{ is_state(presence_entity, 'not_home') }}
      {% elif presence_mode == 'alarm' %}
        {% if presence_domain == 'alarm_control_panel' %}
          {{ is_state(presence_entity, 'armed_away') or is_state(presence_entity, 'armed_vacation') or is_state(presence_entity, 'triggered') }}
        {% else %}
          {{ is_state(presence_entity, 'not_home') or is_state(presence_entity, 'off') }}
        {% endif %}
      {% elif presence_mode == 'custom' %}
        {% set away_state = (presence_away_state | string | trim) %}
        {{ away_state != '' and presence_state == away_state }}
      {% else %}
        {% if presence_state in ['not_home', 'off', 'armed_away', 'armed_vacation', 'triggered'] %}
          {{ true }}
        {% elif presence_state in ['home', 'on', 'disarmed', 'armed_home', 'armed_night', 'arming', 'pending'] %}
          {{ false }}
        {% else %}
          {{ false }}
        {% endif %}
      {% endif %}
    is_away_bool: '{{ (is_away | string | trim | lower) == ''true'' }}'
    target_temp: "{% if is_away_bool %}\n  {{ temp_away | float }}\n{% elif is_day_bool %}\n
      \ {{ temp_day | float }}\n{% else %}\n  {{ temp_night | float }}\n{% endif %}\n"
    # === –¢–ï–ú–ü–ï–†–ê–¢–£–†–ê ===
    temp_in_entity: '{{ temp_indoor | string }}'
    temp_in_raw: '{{ states(temp_in_entity) | float(0) }}'
    temp_in_plausible: '{{ temp_in_raw >= 5 and temp_in_raw <= 40 }}'
    temp_in_valid: '{{ states(temp_in_entity) not in [''unknown'', ''unavailable'',
      ''none'', ''None'', ''''] and temp_in_plausible }}'
    temp_in: '{{ temp_in_raw }}'
    temp_out_entity: '{{ temp_outdoor | default('''', true) | string }}'
    temp_out_raw: '{{ states(temp_out_entity) | float(0) }}'
    temp_out_plausible: '{{ temp_out_raw >= -50 and temp_out_raw <= 50 }}'
    temp_out_valid: '{{ ''.'' in temp_out_entity and states(temp_out_entity) not in
      [''unknown'', ''unavailable'', ''none'', ''None'', ''''] and temp_out_plausible
      }}'
    temp_out: '{{ temp_out_raw }}'
    outdoor_unknown_allows: '{{ (outdoor_temp_policy | string) != ''conservative'' }}'
    cool_allowed: '{{ (temp_out_valid and temp_out > outdoor_cool_min | float) or ((not
      temp_out_valid) and outdoor_unknown_allows) }}'
    vent_allowed: '{{ (temp_out_valid and temp_out > outdoor_vent_min | float) or ((not
      temp_out_valid) and outdoor_unknown_allows) }}'
    # === –í–õ–ê–ñ–ù–û–°–¢–¨ ===
    humidity_entity: '{{ humidity_indoor | string }}'
    humidity_raw: '{{ states(humidity_entity) | float(0) }}'
    humidity_plausible: '{{ humidity_raw >= 1 and humidity_raw <= 100 }}'
    humidity_active: '{{ states(humidity_entity) not in [''unknown'', ''unavailable'',
      ''none'', ''None'', ''''] and humidity_plausible }}'
    humidity_value: '{{ humidity_raw }}'
    humidity_boost: '{{ humidity_active and humidity_value >= (humidity_high | float)
      }}'
    humidity_clear: '{{ (not humidity_active) or humidity_value <= (humidity_low |
      float) }}'
    # === –ö–ê–ß–ï–°–¢–í–û –í–û–ó–î–£–•–ê (–í–ù–£–¢–†–ò) ===
    co2_entity: '{{ co2_sensor | default('''', true) | string }}'
    co2_raw: '{{ states(co2_entity) | float(0) }}'
    co2_plausible: '{{ co2_raw >= 200 and co2_raw <= 5000 }}'
    co2_active: '{{ ''.'' in co2_entity and states(co2_entity) not in [''unknown'',
      ''unavailable'', ''none'', ''None'', ''''] and co2_plausible }}'
    co2_value: '{{ co2_raw }}'
    co2_boost: '{{ co2_active and co2_value >= (co2_high | float) }}'
    co2_clear: '{{ (not co2_active) or co2_value <= (co2_low | float) }}'
    pm25_entity: '{{ pm25_sensor | default('''', true) | string }}'
    pm25_raw: '{{ states(pm25_entity) | float(0) }}'
    pm25_plausible: '{{ pm25_raw >= 0 and pm25_raw <= 500 }}'
    pm25_active: '{{ ''.'' in pm25_entity and states(pm25_entity) not in [''unknown'',
      ''unavailable'', ''none'', ''None'', ''''] and pm25_plausible }}'
    pm25_value: '{{ pm25_raw }}'
    pm25_boost: '{{ pm25_active and pm25_value >= (pm25_high | float) }}'
    pm25_clear: '{{ (not pm25_active) or pm25_value <= (pm25_low | float) }}'
    pm25_outdoor_entity: '{{ pm25_outdoor_sensor | default('''', true) | string }}'
    pm25_outdoor_raw: '{{ states(pm25_outdoor_entity) | float(0) }}'
    pm25_outdoor_plausible: '{{ pm25_outdoor_raw >= 0 and pm25_outdoor_raw <= 500 }}'
    pm25_outdoor_active: '{{ ''.'' in pm25_outdoor_entity and states(pm25_outdoor_entity)
      not in [''unknown'', ''unavailable'', ''none'', ''None'', ''''] and pm25_outdoor_plausible
      }}'
    pm25_outdoor_value: '{{ pm25_outdoor_raw }}'
    pm25_outdoor_bad: '{{ pm25_outdoor_active and pm25_outdoor_value >= (pm25_outdoor_block
      | float) }}'
    co2_outdoor_entity: '{{ co2_outdoor_sensor | default('''', true) | string }}'
    co2_outdoor_raw: '{{ states(co2_outdoor_entity) | float(0) }}'
    co2_outdoor_plausible: '{{ co2_outdoor_raw >= 300 and co2_outdoor_raw <= 5000 }}'
    co2_outdoor_active: '{{ ''.'' in co2_outdoor_entity and states(co2_outdoor_entity)
      not in [''unknown'', ''unavailable'', ''none'', ''None'', ''''] and co2_outdoor_plausible
      }}'
    co2_outdoor_value: '{{ co2_outdoor_raw }}'
    co2_outdoor_bad: '{{ co2_outdoor_active and co2_outdoor_value >= (co2_outdoor_block
      | float) }}'
    voc_entity: '{{ voc_sensor | default('''', true) | string }}'
    voc_raw: '{{ states(voc_entity) | float(0) }}'
    voc_plausible: '{{ voc_raw >= 1 and voc_raw <= 5000 }}'
    voc_active: '{{ ''.'' in voc_entity and states(voc_entity) not in [''unknown'',
      ''unavailable'', ''none'', ''None'', ''''] and voc_plausible }}'
    voc_value: '{{ voc_raw }}'
    voc_boost: '{{ voc_active and voc_value >= (voc_high | float) }}'
    voc_clear: '{{ (not voc_active) or voc_value <= (voc_low | float) }}'
    voc_outdoor_entity: '{{ voc_outdoor_sensor | default('''', true) | string }}'
    voc_outdoor_raw: '{{ states(voc_outdoor_entity) | float(0) }}'
    voc_outdoor_plausible: '{{ voc_outdoor_raw >= 1 and voc_outdoor_raw <= 5000 }}'
    voc_outdoor_active: '{{ ''.'' in voc_outdoor_entity and states(voc_outdoor_entity)
      not in [''unknown'', ''unavailable'', ''none'', ''None'', ''''] and voc_outdoor_plausible
      }}'
    voc_outdoor_value: '{{ voc_outdoor_raw }}'
    voc_outdoor_bad: '{{ voc_outdoor_active and voc_outdoor_value >= (voc_outdoor_block
      | float) }}'
    no_entity: '{{ no_sensor | default('''', true) | string }}'
    no_raw: '{{ states(no_entity) | float(0) }}'
    no_plausible: '{{ no_raw >= 1 and no_raw <= 500 }}'
    no_active: '{{ ''.'' in no_entity and states(no_entity) not in [''unknown'', ''unavailable'',
      ''none'', ''None'', ''''] and no_plausible }}'
    no_value: '{{ no_raw }}'
    no_boost: '{{ no_active and no_value >= (no_high | float) }}'
    no_clear: '{{ (not no_active) or no_value <= (no_low | float) }}'
    # === –ö–ê–ß–ï–°–¢–í–û –í–û–ó–î–£–•–ê (–°–ù–ê–†–£–ñ–ò) ===
    # –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ "–≤–∫–ª—é—á–∞—é—Ç —É—Å–∏–ª–µ–Ω–∏–µ", –∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –µ–≥–æ.
    no_outdoor_entity: '{{ no_outdoor_sensor | default('''', true) | string }}'
    no_outdoor_raw: '{{ states(no_outdoor_entity) | float(0) }}'
    no_outdoor_plausible: '{{ no_outdoor_raw >= 1 and no_outdoor_raw <= 500 }}'
    no_outdoor_active: '{{ ''.'' in no_outdoor_entity and states(no_outdoor_entity)
      not in [''unknown'', ''unavailable'', ''none'', ''None'', ''''] and no_outdoor_plausible
      }}'
    no_outdoor_value: '{{ no_outdoor_raw }}'
    no_outdoor_bad: '{{ no_outdoor_active and no_outdoor_value >= (no_outdoor_block
      | float) }}'
    air_boost_count: "{{ (1 if co2_boost else 0)\n + (1 if pm25_boost else 0)\n + (1 if voc_boost else 0)\n + (1 if no_boost else 0)\n + (1 if humidity_boost else 0)\n}}"
    all_air_clear: '{{ co2_clear and pm25_clear and voc_clear and no_clear }}'
    outdoor_air_bad: '{{ pm25_outdoor_bad or co2_outdoor_bad or voc_outdoor_bad or
      no_outdoor_bad }}'
    # === –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–í–£ ===
    current_hvac_mode: '{{ states(turkov_climate) | string }}'
    climate_available: '{{ current_hvac_mode not in [''unknown'', ''unavailable'', ''none'',
      ''None'', ''''] }}'
    current_fan_mode: '{{ state_attr(turkov_climate, ''fan_mode'') | default('''',
      true) | string }}'
    current_target_temp: '{{ state_attr(turkov_climate, ''temperature'') | float(999)
      }}'
    desired_hvac_mode: "{% if is_away_bool and away_behavior == 'off' %}\n  off\n{% elif not vent_allowed %}\n  {{ hvac_mode_heat | string }}\n{% elif cool_allowed and temp_in_valid and temp_in > (target_temp | float + temp_hysteresis_on | float) %}\n  {{ hvac_mode_cool | string }}\n{% else %}\n  {{ hvac_mode_ventilation | string }}\n{% endif %}\n"
    # –õ–æ–≥–∏–∫–∞ –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞ (3 —Å—Ç—É–ø–µ–Ω–∏):
    # 1) –ï—Å–ª–∏ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç –∏ –≤—ã–±—Ä–∞–Ω away=off -> –Ω–µ —Ç—Ä–æ–≥–∞–µ–º fan_mode (hvac_only, –∑–∞—â–∏—Ç–∞ –æ—Ç coupling fan->HVAC).
    #    HVAC=off —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ; –æ—Ç–¥–µ–ª—å–Ω—ã–π fan_mode=off –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å
    #    –Ω–µ—è–≤–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ HVAC –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∫–æ–π fan->HVAC.
    # 2) –ï—Å–ª–∏ —Å–Ω–∞—Ä—É–∂–∏ –≤–æ–∑–¥—É—Ö –ø–ª–æ—Ö–æ–π, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–≥–æ–Ω (max = medium)
    # 3) –ï—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ –ø–ª–æ—Ö–æ (>=2 —Ç—Ä–∏–≥–≥–µ—Ä–∞) -> high
    # 4) –ï—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ —É–º–µ—Ä–µ–Ω–Ω–æ –ø–ª–æ—Ö–æ (1 —Ç—Ä–∏–≥–≥–µ—Ä) -> medium
    # 5) –ï—Å–ª–∏ –≤—Å—ë —á–∏—Å—Ç–æ -> low
    desired_fan_mode: "{% set boost_count = air_boost_count | int(0) %}\n{% if is_away_bool and away_behavior == 'off' %}\n  {{ '' }}\n{% elif outdoor_air_bad and boost_count >= 1 %}\n  {{ fan_mode_medium | string }}\n{% elif outdoor_air_bad %}\n  {{ fan_mode_low | string }}\n{% elif boost_count >= 2 %}\n  {{ fan_mode_high | string }}\n{% elif boost_count == 1 %}\n  {{ fan_mode_medium | string }}\n{% elif all_air_clear and humidity_clear %}\n  {{ fan_mode_low | string }}\n{% else %}\n  {{ '' }}\n{% endif %}\n"
- choose:
  # –®–∞–≥ 0: –ø—Ä–∏–º–µ–Ω—è–µ–º —Ü–µ–ª–µ–≤—É—é —É—Å—Ç–∞–≤–∫—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (—Ä–µ–∂–∏–º –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è), –µ—Å–ª–∏ –æ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å.
  - conditions: '{{ climate_available and (desired_hvac_mode | trim | lower) != ''off''
      and (target_temp | float(0)) > 0 and ((current_target_temp - (target_temp | float)) | abs >
      0.2) }}'
    sequence:
    - service: climate.set_temperature
      target:
        entity_id: !input turkov_climate
      data:
        temperature: '{{ target_temp | float }}'
  default: []
- choose:
  # –®–∞–≥ 1: –ø—Ä–∏–º–µ–Ω—è–µ–º HVAC —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∂–∏–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è
  # –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º. –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º.
  - conditions: "{% set desired = (desired_hvac_mode | trim | lower) %}\n{% set current
      = (current_hvac_mode | string | lower) %}\n{% set modes_raw = state_attr(turkov_climate,
      'hvac_modes') | default([], true) %}\n{% set modes_lc = (modes_raw | map('string') | map('lower')
      | list) if (modes_raw is iterable and modes_raw is not string) else [modes_raw | string
      | lower] %}\n{{ climate_available and desired | length > 0 and desired !=
      current and desired in modes_lc }}\n"
    sequence:
    - service: climate.set_hvac_mode
      target:
        entity_id: !input turkov_climate
      data:
        hvac_mode: '{{ desired_hvac_mode | trim }}'
  default: []
- choose:
  # –®–∞–≥ 2: –ø—Ä–∏–º–µ–Ω—è–µ–º fan_mode —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∂–∏–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è
  # –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º. –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º.
  - conditions: "{% set desired = (desired_fan_mode | trim | lower) %}\n{% set current
      = (current_fan_mode | string | lower) %}\n{% set modes_raw = state_attr(turkov_climate,
      'fan_modes') | default([], true) %}\n{% set modes_lc = (modes_raw | map('string') | map('lower')
      | list) if (modes_raw is iterable and modes_raw is not string) else [modes_raw | string
      | lower] %}\n{{ climate_available and desired | length > 0 and desired !=
      current and desired in modes_lc }}\n"
    sequence:
    - service: climate.set_fan_mode
      target:
        entity_id: !input turkov_climate
      data:
        fan_mode: '{{ desired_fan_mode | trim }}'
  default: []
mode: single

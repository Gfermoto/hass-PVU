# Roadmap hass-PVU

Это мой личный план развития проекта.

## Цели на 6 месяцев

- Довести develop-ветку до уровня `v1.0-ready` без потери стабильности.
- Сохранить `pvu_min.yaml` как консервативную стабильную базу.
- Снизить количество регрессий через repeatable release-процесс и базовую метрику качества.
- Упростить первый запуск: от импорта до рабочего сценария < 30 минут.

## Принцип веток

- `pvu_min.yaml` (stable): только bugfix/fail-safe/safety backport.
- `pvu.yaml` (develop): новые функции, UX, диагностика, экспериментальные опции.

Backport в stable делаем только после проверки в develop и smoke-теста по `docs/RELEASE_CHECKLIST.md`.

## Release train

| Версия | Цель | Что входит |
|---|---|---|
| `v0.3.3` | Stabilization | Backport критичных safety-улучшений из develop в stable, smoke-test, документация по веткам |
| `v0.3.4` | Hardening | Полировка edge-cases, уточнение параметров по фидбеку, подготовка к v0.4 |
| `v0.4.0` | Refactor & UX | Снижение технического долга, расширение диагностики, улучшение сценариев настройки |
| `v0.5.0` | Extensibility | Профили/пресеты (климат/тип жилья), улучшенная логика управления fan |
| `v1.0.0` | Стабильный релиз | Полный checklist, стабильный API input-полей, подтверждение работы у пользователей |

## Технический трек

### Ближайшие (v0.3.3-v0.3.4)

- [ ] Проверить и при необходимости backport `outdoor_temp_policy` в `pvu_min.yaml`.
- [ ] Добавить защиту от дрожания режимов (debounce/min interval) в develop.
- [ ] Валидация выбросов датчиков (защита от нереалистичных значений).
- [ ] Уточнить fallback при ограничениях `supported_*` режимов.

### Среднесрочные (v0.4.x-v0.5.x)

- [ ] Профили настроек: `climate_profile` (континентальный/мягкий/холодный).
- [ ] Профили жилья: `apartment/house/office`.
- [ ] Плавный возврат fan (`high -> medium -> low`) вместо резких переключений.
- [ ] Расширить `debug_mode`: явная причина "почему режим не применён".

## HVAC трек

- [ ] Обязательный сезонный smoke-test (зима/межсезонье/лето).
- [ ] Проверка антизаморозки при неизвестной наружной температуре (`conservative`).
- [ ] Контроль частоты HVAC-переключений (износ/комфорт).
- [ ] Верификация порогов CO2/PM2.5/VOC/NOx на реальных данных помещения.

## Метрики и наблюдение (без отдельной инфраструктуры)

### KPI

- [ ] Доля времени в температурной зоне комфорта.
- [ ] Доля времени CO2 ниже порога.
- [ ] Частота переключений HVAC в час.
- [ ] Доля времени fan в `low`.
- [ ] Количество защитных срабатываний (`outdoor_temp_policy`, anti-freeze fallback).

### Как собирать

- Recorder + History Stats + template-сенсоры.
- Еженедельный обзор KPI на Lovelace.
- Сравнения `pvu_min.yaml` vs `pvu.yaml` по одинаковым входным условиям.

## Документация и коммуникации

- [ ] Обновлять `README.md` при каждом изменении поведения.
- [ ] К каждому релизу: `CHANGELOG.md` + короткий TG-анонс (`docs/TG_POST_RU.md`).
- [ ] Поддерживать `docs/ARTICLE_RU.md` в актуальном состоянии как "длинную" версию.
- [ ] Собрать FAQ из повторяющихся вопросов в issues/TG.

## Критерии готовности `v1.0`

- [ ] Нет открытых критичных багов.
- [ ] Полностью пройден `docs/RELEASE_CHECKLIST.md`.
- [ ] Проверены оба blueprint: `pvu_min.yaml` и `pvu.yaml`.
- [ ] Есть подтверждение стабильной работы минимум от 3 независимых пользователей.
- [ ] Документация синхронизирована с фактической логикой кода.
